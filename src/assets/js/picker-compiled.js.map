{"version":3,"sources":["picker.js"],"names":[],"mappings":"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","file":"picker-compiled.js","sourcesContent":["function picker() {\n  //if (_sington) return _sington;\n\n  // 配置项\n  var options = arguments[arguments.length - 1];\n  var defaults = _util2.default.extend({\n    id: 'default',\n    className: '',\n    onChange: _util2.default.noop,\n    onConfirm: _util2.default.noop\n  }, options);\n\n  // 数据处理\n  var items = void 0;\n  var isMulti = false; // 是否多列的类型\n  if (arguments.length > 2) {\n    var i = 0;\n    items = [];\n    while (i < arguments.length - 1) {\n      items.push(arguments[i++]);\n    }\n    isMulti = true;\n  } else {\n    items = arguments[0];\n  }\n\n  // 获取缓存\n  temp[defaults.id] = temp[defaults.id] || [];\n  var result = [];\n  var lineTemp = temp[defaults.id];\n  var $picker = (0, _util2.default)(_util2.default.render(_picker2.default, defaults));\n  var depth = options.depth || (isMulti ? items.length : util.depthOf(items[0])),\n    groups = '';\n\n  // 显示与隐藏的方法\n  function show() {\n    (0, _util2.default)('body').append($picker);\n\n    // 这里获取一下计算后的样式，强制触发渲染. fix IOS10下闪现的问题\n    _util2.default.getStyle($picker[0], 'transform');\n\n    $picker.find('.weui-mask').addClass('weui-animate-fade-in');\n    $picker.find('.weui-picker').addClass('weui-animate-slide-up');\n  }\n  function _hide(callback) {\n    _hide = _util2.default.noop; // 防止二次调用导致报错\n\n    $picker.find('.weui-mask').addClass('weui-animate-fade-out');\n    $picker.find('.weui-picker').addClass('weui-animate-slide-down').on('animationend webkitAnimationEnd', function () {\n      $picker.remove();\n      _sington = false;\n      callback && callback();\n    });\n  }\n  function hide(callback) {\n    _hide(callback);\n  }\n\n  // 初始化滚动的方法\n  function scroll(items, level) {\n    if (lineTemp[level] === undefined && defaults.defaultValue && defaults.defaultValue[level] !== undefined) {\n      // 没有缓存选项，而且存在defaultValue\n      var defaultVal = defaults.defaultValue[level];\n      var index = 0,\n        len = items.length;\n\n      for (; index < len; ++index) {\n        if (defaultVal == items[index].value) break;\n      }\n      if (index < len) {\n        lineTemp[level] = index;\n      } else {\n        console.warn('Picker has not match defaultValue: ' + defaultVal);\n      }\n    }\n    $picker.find('.weui-picker__group').eq(level).scroll({\n      items: items,\n      temp: lineTemp[level],\n      onChange: function onChange(item, index) {\n        //为当前的result赋值。\n        if (item) {\n          result[level] = new Result(item);\n        } else {\n          result[level] = null;\n        }\n        lineTemp[level] = index;\n\n        if (isMulti) {\n          defaults.onChange(result);\n        } else {\n          /**\n           * @子列表处理\n           * 1. 在没有子列表，或者值列表的数组长度为0时，隐藏掉子列表。\n           * 2. 滑动之后发现重新有子列表时，再次显示子列表。\n           *\n           * @回调处理\n           * 1. 因为滑动实际上是一层一层传递的：父列表滚动完成之后，会call子列表的onChange，从而带动子列表的滑动。\n           * 2. 所以，使用者的传进来onChange回调应该在最后一个子列表滑动时再call\n           */\n          if (item.children && item.children.length > 0) {\n            $picker.find('.weui-picker__group').eq(level + 1).show();\n            !isMulti && scroll(item.children, level + 1); // 不是多列的情况下才继续处理children\n          } else {\n            //如果子列表test不通过，子孙列表都隐藏。\n            var $items = $picker.find('.weui-picker__group');\n            $items.forEach(function (ele, index) {\n              if (index > level) {\n                (0, _util2.default)(ele).hide();\n              }\n            });\n\n            result.splice(level + 1);\n\n            defaults.onChange(result);\n          }\n        }\n      },\n      onConfirm: defaults.onConfirm\n    });\n  }\n\n  while (depth--) {\n    groups += _group2.default;\n  }\n\n  $picker.find('.weui-picker__bd').html(groups);\n  show();\n\n  if (isMulti) {\n    items.forEach(function (item, index) {\n      scroll(item, index);\n    });\n  } else {\n    scroll(items, 0);\n  }\n\n  $picker.on('click', '.weui-mask', function () {\n    hide();\n  }).on('click', '.weui-picker__action', function () {\n    hide();\n  }).on('click', '#weui-picker-confirm', function () {\n    defaults.onConfirm(result);\n  });\n\n  _sington = $picker[0];\n  _sington.hide = hide;\n  return _sington;\n}\n"]}